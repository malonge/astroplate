---
import Base from "@/layouts/Base.astro";
import CVHeader from "@/layouts/components/CVHeader.astro";
import CVPrintHeader from "@/layouts/components/CVPrintHeader.astro";
import CVContact from "@/layouts/components/CVContact.astro";
import CVSection from "@/layouts/components/CVSection.astro";
import CVExperience from "@/layouts/components/CVExperience.astro";
import CVEducation from "@/layouts/components/CVEducation.astro";
import CVSkills from "@/layouts/components/CVSkills.astro";
import CVPublications from "@/layouts/components/CVPublications.astro";
import CVLanguages from "@/layouts/components/CVLanguages.astro";
import cvData from "@/config/cv.json" with { type: "json" };
import "@/styles/cv.css";
import "@/styles/cv-print.css";

// Note: CSS will be included via style tag for better compatibility

interface Props {
  title: string;
  cvData: any;
}

const { title } = Astro.props;
---

<Base title={title}>
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <div class="cv-container">
    <!-- Web-optimized header (visible on screen) -->
    <CVHeader 
      name={cvData.basics.name}
      label={cvData.basics.label}
      class="web-only"
    />
    
    <!-- Contact information for web -->
    <CVContact 
      email={cvData.basics.email}
      phone={cvData.basics.phone}
      location={cvData.basics.location}
      url={cvData.basics.url}
      profiles={cvData.basics.profiles}
      class="web-only"
    />

    <!-- Print-optimized header (hidden on screen, visible in print) -->
    <CVPrintHeader 
      name={cvData.basics.name}
      label={cvData.basics.label}
      email={cvData.basics.email}
      phone={cvData.basics.phone}
      location={cvData.basics.location}
      url={cvData.basics.url}
      profiles={cvData.basics.profiles}
    />

    <!-- Professional Summary -->
    <CVSection title="Professional Summary">
      <p>{cvData.basics.summary}</p>
    </CVSection>

    <!-- Professional Experience -->
    <CVExperience jobs={cvData.work} />

    <!-- Education -->
    <CVEducation education={cvData.education} />

    <!-- Skills -->
    <CVSkills skills={cvData.skills} />

    <!-- Publications -->
    {cvData.publications && cvData.publications.length > 0 && (
      <CVPublications publications={cvData.publications} />
    )}

    <!-- Languages -->
    {cvData.languages && cvData.languages.length > 0 && (
      <CVLanguages languages={cvData.languages} />
    )}
  </div>
</Base>
